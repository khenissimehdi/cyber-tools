#!/bin/bash

# This function initializes the system prior to main processing
init () {
    set -o nounset    # Do not allow use of undefined vars. Use ${VAR:-} to use an undefined VAR
    ulimit -c 0       # Set Core size to 0
}

# This function format strings for logfunctions
format () {
    echo "$(date +"%d/%m/%y %T") [${1}]";
}

loginfo ()  { echo -e "\033[32m$(format INFO)\033[0m ${@}"; }
lognotice ()  { echo -e "\033[34m$(format NOTICE)\033[0m ${@}"; }
logwarning () { echo -e "\033[33m$(format WARNING)\033[0m ${@}"; }
logerror () { echo -e "\033[31m$(format ERROR)\033[0m ${@}" 1>&2; }

# This function checks if brew is properly installed.
checkBrewPresence () {
    brew --help 1>/dev/null 2>/dev/null
    if [ $? != 0 ]; then
        logerror "brew is not present, exiting the script now."
        exit 1
    fi
}


# This function installs a .pkg file from the specified path.
# $1 : Downloaded package name
installTools () {
    loginfo "Starting installation of the package..."
    brew install foremost
    brew install exiftool
    brew install autopsy
    brew install --cask zap
    brew install nmap
    brew install nikto
    brew install ffuf
    brew install --cask metasploit
    brew install hydra
    
}

main ()
{
    init "$@"
    checkBrewPresence 
    installTools
    exit 0
}

main
